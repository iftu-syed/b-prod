<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stool incontinence Survey (Wexner)</title>
  <link rel="stylesheet" href="/styles/survey.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

</head>

<body>

  <button class="lang-toggle" onclick="toggleLanguage()">العربية</button>
  
<div class="parentrow">
    
  <div class="parentcolumn left">

    <div class="sidebar">
      <hr class="spacer">
      <img src="/assets/images/logo.png">
      <hr class="spacer">
      <div class="sidebar-item-active">Wexner</div>
      <div class="sidebar-item-inactive">ICIQ-UI SF</div>
      <div class="sidebar-item-inactive">EPDS</div>
      <div class="sidebar-item-inactive">PROMIS-10</div>
      

      
      <!-- <div class="legend">
        <h2 data-en="Notes :" data-ar="ملاحظات :">Notes :</h2>
<ul>
          <li data-en="0 = Perfect continence" data-ar="0 = سلس مثالي">0 = Perfect continence</li>
          <li data-en="1 = Rarely: Less than 1/month" data-ar="1 = نادرا: أقل من 1/شهر">1 = Rarely: Less than 1/month</li>
          <li data-en="2 = Sometimes: Less than 1/week, but at least 1/month" data-ar="2 = أحيانا: أقل من 1/أسبوع، ولكن على الأقل 1/شهر">2 = Sometimes: Less than 1/week, but at least 1/month</li>
          <li data-en="3 = Usually: Less than 1/day, but at least 1/week" data-ar="3 = عادة: أقل من 1/يوم، ولكن على الأقل 1/أسبوع">3 = Usually: Less than 1/day, but at least 1/week</li>
          <li data-en="4 = Always: At least 1/day" data-ar="4 = دائما: على الأقل 1/يوم">4 = Always: At least 1/day</li>
</ul>
      </div> -->

      <!-- <div class="legend">
        <h2 data-en="Notes :" data-ar="ملاحظات :">Notes :</h2>
        <ul>
            <li data-en="Rarely = < 1/month" data-ar="1 : نادرا: أقل من 1/شهر">Rarely = < 1/month</li>
            <li data-en="Sometimes =  < 1/week, > 1/month" data-ar="2 : أحيانا: أقل من 1/أسبوع، ولكن على الأقل 1/شهر">Sometimes =  < 1/week, > 1/month</li>
            <li data-en="Usually =  < 1/day, > 1/week" data-ar=" عادة: أقل من 1/يوم، ولكن على الأقل 1/أسبوع">Usually =  < 1/day, > 1/week</li>
            <li data-en="Always = > 1/day" data-ar="4 : دائما: على الأقل 1/يوم">Always = > 1/day</li>
        </ul>
    </div> -->
    
    <div class="legend">
      <h2 data-en="Notes :" data-ar="ملاحظات :">Notes :</h2>
      <ul>
          <li data-en="Rarely : < 1/month" data-ar="نادرا: أقل من 1/شهر">Rarely : < 1/month</li>
          <li data-en="Sometimes : < 1/week, > 1/month" data-ar="أحيانا: أقل من 1/أسبوع، ولكن على الأقل 1/شهر">Sometimes : < 1/week, > 1/month</li>
          <li data-en="Usually : < 1/day, > 1/week" data-ar="عادة: أقل من 1/يوم، ولكن على الأقل 1/أسبوع">Usually : < 1/day, > 1/week</li>
          <li data-en="Always : > 1/day" data-ar="دائما: أكثر من 1/يوم">Always : > 1/day</li>
      </ul>
  </div>
  

    </div>
      
  </div>

  <div class="parentcolumn right">
    <div class="infobox">
      <!-- Progress Bar -->
      <h1 data-en="Stool incontinence Survey (Wexner)" data-ar="استطلاع سلس البراز (ويكسنر)">
        Stool incontinence Survey (Wexner)
    </h1>
    
    <p data-en="This Wexner PROMS is designed to help us understand your bowel habits and your symptoms and overall quality of life. By completing this survey, you provide valuable information that enables us to offer you the best possible care and support tailored to your needs." 
       data-ar="تم تصميم استطلاع ويكسنر هذا لمساعدتنا على فهم عاداتك المعوية وأعراضك وجودة حياتك بشكل عام. من خلال إكمال هذا الاستطلاع، تقدم معلومات قيمة تتيح لنا تقديم أفضل رعاية ودعم مخصصين لاحتياجاتك.">
        <i class='bx bx-info-circle' style="font-size: 35px;"></i>
        This Wexner PROMS is designed to help us understand your bowel habits and your symptoms and overall quality of life. By completing this survey, you provide valuable information that enables us to offer you the best possible care and support tailored to your needs.
    </p>    
    
<hr class="spacer">
      <div class="progress-bar">
        <div class="progress" id="progress-bar">
        </div>
      </div>
    </div>
    <form action="/submit_Wexner" method="post" class="surveyform">
      <input type="hidden" name="Mr_no" value="<%= Mr_no %>">
      <input type="hidden" id="selectedLang" name="selectedLang" value="en"> <!-- This line ensures that the current language is passed -->
    
      <!-- Question 1 -->
      <div class="question-container active" id="question-1">
        <div class="back-button">
          <button type="button" onclick="previousQuestion()" style="display:none;"><i class='bx bx-chevrons-left'></i>Previous</button>
        </div>
        <div class="en-content">
          <p>I have incontinence of solid stool</p>
          <div id="custom-radio-pos"></div>
          <div id="form-wrapper">
            <div id="custom-radio">
              <input type="radio" name="I have incontinence of solid stool" id="solid_1" value="0" required>
              <label for="solid_1">never</label> 
              <input type="radio" name="I have incontinence of solid stool" id="solid_2" value="1" required>
              <label for="solid_2">rarely</label>
              <input type="radio" name="I have incontinence of solid stool" id="solid_3" value="2" required>
              <label for="solid_3">sometimes</label>
              <input type="radio" name="I have incontinence of solid stool" id="solid_4" value="3" required>
              <label for="solid_4">usually</label>
              <input type="radio" name="I have incontinence of solid stool" id="solid_5" value="4" required>
              <label for="solid_5">always</label>
              <div id="custom-radio-pos"></div>
            </div>
          </div>
        </div>
        
        <div class="ar-content" style="display: none;">
          <p>لدي سلس في البراز الصلب</p>
          <div id="custom-radio-pos"></div>
          <div id="form-wrapper">
            <div id="custom-radio">
              <input type="radio" name="I have incontinence of solid stool" id="solid_1_ar" value="0" required>
              <label for="solid_1_ar">أبدا</label> 
              <input type="radio" name="I have incontinence of solid stool" id="solid_2_ar" value="1" required>
              <label for="solid_2_ar">نادرا</label>
              <input type="radio" name="I have incontinence of solid stool" id="solid_3_ar" value="2" required>
              <label for="solid_3_ar">أحيانا</label>
              <input type="radio" name="I have incontinence of solid stool" id="solid_4_ar" value="3" required>
              <label for="solid_4_ar">عادة</label>
              <input type="radio" name="I have incontinence of solid stool" id="solid_5_ar" value="4" required>
              <label for="solid_5_ar">دائما</label>
              <div id="custom-radio-pos"></div>
            </div>
          </div>
        </div>
        
        
      </div>
    
      <!-- Question 2 -->
      <div class="question-container" id="question-2">
        <div class="back-button">
          <button type="button" onclick="previousQuestion()"><i class='bx bx-chevrons-left'></i>Previous</button>
        </div>
        <div class="en-content">
          <p>I have liquid stool incontinence</p>
          <div id="custom-radio-pos"></div>
          <div id="form-wrapper">
            <div id="custom-radio">
              <input type="radio" name="I have liquid stool incontinence" id="liquid_1" value="0" required>
              <label for="liquid_1">never</label>
              <input type="radio" name="I have liquid stool incontinence" id="liquid_2" value="1" required>
              <label for="liquid_2">rarely</label>
              <input type="radio" name="I have liquid stool incontinence" id="liquid_3" value="2" required>
              <label for="liquid_3">sometimes</label>
              <input type="radio" name="I have liquid stool incontinence" id="liquid_4" value="3" required>
              <label for="liquid_4">usually</label>
              <input type="radio" name="I have liquid stool incontinence" id="liquid_5" value="4" required>
              <label for="liquid_5">always</label>
              <div id="custom-radio-pos"></div>
            </div>
          </div>
        </div>
      
        <div class="ar-content" style="display: none;">
          <p>لدي سلس في البراز السائل</p>
          <div id="custom-radio-pos"></div>
          <div id="form-wrapper">
            <div id="custom-radio">
              <input type="radio" name="I have liquid stool incontinence" id="liquid_1_ar" value="0" required>
              <label for="liquid_1_ar">أبدا</label> 
              <input type="radio" name="I have liquid stool incontinence" id="liquid_2_ar" value="1" required>
              <label for="liquid_2_ar">نادرا</label>
              <input type="radio" name="I have liquid stool incontinence" id="liquid_3_ar" value="2" required>
              <label for="liquid_3_ar">أحيانا</label>
              <input type="radio" name="I have liquid stool incontinence" id="liquid_4_ar" value="3" required>
              <label for="liquid_4_ar">عادة</label>
              <input type="radio" name="I have liquid stool incontinence" id="liquid_5_ar" value="4" required>
              <label for="liquid_5_ar">دائما</label>
              <div id="custom-radio-pos"></div>
            </div>
          </div>
        </div>
      </div>
      
    
      <!-- Question 3 -->
      <div class="question-container" id="question-3">
        <div class="back-button">
          <button type="button" onclick="previousQuestion()"><i class='bx bx-chevrons-left'></i>Previous</button>
        </div>
        <div class="en-content">
          <p>I have 'gas' type incontinence</p>
          <div id="custom-radio-pos"></div>
          <div id="form-wrapper">
            <div id="custom-radio">
              <input type="radio" name="I have 'gas' type incontinence" id="gas_1" value="0" required>
              <label for="gas_1">never</label>
              <input type="radio" name="I have 'gas' type incontinence" id="gas_2" value="1" required>
              <label for="gas_2">rarely</label>
              <input type="radio" name="I have 'gas' type incontinence" id="gas_3" value="2" required>
              <label for="gas_3">sometimes</label>
              <input type="radio" name="I have 'gas' type incontinence" id="gas_4" value="3" required>
              <label for="gas_4">usually</label>
              <input type="radio" name="I have 'gas' type incontinence" id="gas_5" value="4" required>
              <label for="gas_5">always</label>
              <div id="custom-radio-pos"></div>
            </div>
          </div>
        </div>
      
        <div class="ar-content" style="display: none;">
          <p>لدي سلس غازي</p>
          <div id="custom-radio-pos"></div>
          <div id="form-wrapper">
            <div id="custom-radio">
              <input type="radio" name="I have 'gas' type incontinence" id="gas_1_ar" value="0" required>
              <label for="gas_1_ar">أبدا</label> 
              <input type="radio" name="I have 'gas' type incontinence" id="gas_2_ar" value="1" required>
              <label for="gas_2_ar">نادرا</label>
              <input type="radio" name="I have 'gas' type incontinence" id="gas_3_ar" value="2" required>
              <label for="gas_3_ar">أحيانا</label>
              <input type="radio" name="I have 'gas' type incontinence" id="gas_4_ar" value="3" required>
              <label for="gas_4_ar">عادة</label>
              <input type="radio" name="I have 'gas' type incontinence" id="gas_5_ar" value="4" required>
              <label for="gas_5_ar">دائما</label>
              <div id="custom-radio-pos"></div>
            </div>
          </div>
        </div>
      </div>
      
    
      <!-- Question 4 -->
      <div class="question-container" id="question-4">
        <div class="back-button">
          <button type="button" onclick="previousQuestion()"><i class='bx bx-chevrons-left'></i>Previous</button>
        </div>
        <div class="en-content">
          <p>I have to wear pads due to incontinence</p>
          <div id="custom-radio-pos"></div>
          <div id="form-wrapper">
            <div id="custom-radio">
              <input type="radio" name="I have to wear pads due to incontinence" id="pads_1" value="0" required>
              <label for="pads_1">never</label>
              <input type="radio" name="I have to wear pads due to incontinence" id="pads_2" value="1" required>
              <label for="pads_2">rarely</label>
              <input type="radio" name="I have to wear pads due to incontinence" id="pads_3" value="2" required>
              <label for="pads_3">sometimes</label>
              <input type="radio" name="I have to wear pads due to incontinence" id="pads_4" value="3" required>
              <label for="pads_4">usually</label>
              <input type="radio" name="I have to wear pads due to incontinence" id="pads_5" value="4" required>
              <label for="pads_5">always</label>
              <div id="custom-radio-pos"></div>
            </div>
          </div>
        </div>
      
        <div class="ar-content" style="display: none;">
          <p>علي أن أرتدي وسادات بسبب السلس</p>
          <div id="custom-radio-pos"></div>
          <div id="form-wrapper">
            <div id="custom-radio">
              <input type="radio" name="I have to wear pads due to incontinence" id="pads_1_ar" value="0" required>
              <label for="pads_1_ar">أبدا</label> 
              <input type="radio" name="I have to wear pads due to incontinence" id="pads_2_ar" value="1" required>
              <label for="pads_2_ar">نادرا</label>
              <input type="radio" name="I have to wear pads due to incontinence" id="pads_3_ar" value="2" required>
              <label for="pads_3_ar">أحيانا</label>
              <input type="radio" name="I have to wear pads due to incontinence" id="pads_4_ar" value="3" required>
              <label for="pads_4_ar">عادة</label>
              <input type="radio" name="I have to wear pads due to incontinence" id="pads_5_ar" value="4" required>
              <label for="pads_5_ar">دائما</label>
              <div id="custom-radio-pos"></div>
            </div>
          </div>
        </div>
      </div>
      
    
      <!-- Question 5 -->
      <div class="question-container" id="question-5">
        <div class="back-button">
          <button type="button" onclick="previousQuestion()"><i class='bx bx-chevrons-left'></i>Previous</button>
        </div>
        <div class="en-content">
          <p>Feel my lifestyle is altered due to incontinence to stool</p>
          <div id="custom-radio-pos"></div>
          <div id="form-wrapper">
            <div id="custom-radio">
              <input type="radio" name="Feel my lifestyle is altered due to incontinence to stool" id="lifestyle_1" value="0" required>
              <label for="lifestyle_1">never</label>
              <input type="radio" name="Feel my lifestyle is altered due to incontinence to stool" id="lifestyle_2" value="1" required>
              <label for="lifestyle_2">rarely</label>
              <input type="radio" name="Feel my lifestyle is altered due to incontinence to stool" id="lifestyle_3" value="2" required>
              <label for="lifestyle_3">sometimes</label>
              <input type="radio" name="Feel my lifestyle is altered due to incontinence to stool" id="lifestyle_4" value="3" required>
              <label for="lifestyle_4">usually</label>
              <input type="radio" name="Feel my lifestyle is altered due to incontinence to stool" id="lifestyle_5" value="4" required>
              <label for="lifestyle_5">always</label>
              <div id="custom-radio-pos"></div>
            </div>
          </div>
        </div>
      
        <div class="ar-content" style="display: none;">
          <p>أشعر أن نمط حياتي تغير بسبب السلس إلى البراز</p>
          <div id="custom-radio-pos"></div>
          <div id="form-wrapper">
            <div id="custom-radio">
              <input type="radio" name="Feel my lifestyle is altered due to incontinence to stool" id="lifestyle_1_ar" value="0" required>
              <label for="lifestyle_1_ar">أبدا</label> 
              <input type="radio" name="Feel my lifestyle is altered due to incontinence to stool" id="lifestyle_2_ar" value="1" required>
              <label for="لifestyle_2_ar">نادرا</label>
              <input type="radio" name="Feel my lifestyle is altered due to incontinence to stool" id="lifestyle_3_ar" value="2" required>
              <label for="lifestyle_3_ar">أحيانا</label>
              <input type="radio" name="Feel my lifestyle is altered due to incontinence to stool" id="lifestyle_4_ar" value="3" required>
              <label for="lifestyle_4_ar">عادة</label>
              <input type="radio" name="Feel my lifestyle is altered due to incontinence to stool" id="lifestyle_5_ar" value="4" required>
              <label for="lifestyle_5_ar">دائما</label>
              <div id="custom-radio-pos"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="nav-buttons">
        <button type="submit" style="display:none;"><i class='bx bx-check-double'></i> Submit</button>
      </div>
      
    </form>


  </div>

</div>
<script>
  let currentLang = 'en';
let currentQuestion = 0;
const questions = document.querySelectorAll('.question-container');
const progressBar = document.getElementById('progress-bar');

function updateProgressBar() {
  const progress = ((currentQuestion + 1) / questions.length) * 100;
  progressBar.style.width = `${progress}%`;
}

function showQuestion(index) {
  questions.forEach((question, i) => {
    question.classList.toggle('active', i === index);
  });
  updateProgressBar();
  
  // Check if we're at the last question
  const submitButton = document.querySelector('.nav-buttons button[type="submit"]');
  if (currentQuestion === questions.length - 1) {
    submitButton.style.display = 'block'; // Show submit button
  } else {
    submitButton.style.display = 'none'; // Hide submit button
  }
}

function nextQuestion() {
  const currentInputs = questions[currentQuestion].querySelectorAll('input[type="radio"]');
  let answered = false;

  currentInputs.forEach(input => {
    if (input.checked) {
      answered = true;
    }
  });

  if (answered) {
    if (currentQuestion < questions.length - 1) {
      currentQuestion++;
      showQuestion(currentQuestion);
    }
  }
}
function previousQuestion() {
  if (currentQuestion > 0) {
    currentQuestion--;
    showQuestion(currentQuestion);

    // Reattach the event listeners after showing the previous question
    addRadioEventListeners();
  }
}

function addRadioEventListeners() {
  questions.forEach((question, questionIndex) => {
    const radioInputs = question.querySelectorAll('input[type="radio"]');

    radioInputs.forEach(input => {
      // Remove any existing event listener before adding a new one to avoid multiple triggers
      input.removeEventListener('click', handleRadioClick);
      input.addEventListener('click', handleRadioClick);
    });
  });
}

function handleRadioClick() {
  if (currentQuestion === questions.length - 1) {
    return; // Do nothing if we are on the last question
  }
  nextQuestion();
}



// function toggleLanguage() {
//     currentLang = currentLang === 'en' ? 'ar' : 'en';
    
//     // Loop through all question containers
//     questions.forEach(question => {
//         const enContent = question.querySelector('.en-content');
//         const arContent = question.querySelector('.ar-content');
        
//         // Toggle visibility of language-specific content for each question
//         if (enContent && arContent) {
//             enContent.style.display = currentLang === 'en' ? 'block' : 'none';
//             arContent.style.display = currentLang === 'en' ? 'none' : 'block';
//         }
//     });
    
//     // Update the toggle button text
//     document.querySelector('.lang-toggle').innerText = currentLang === 'en' ? 'العربية' : 'English';
// }

// function toggleLanguage() {
//     currentLang = currentLang === 'en' ? 'ar' : 'en';
    
//     // Update the hidden language input field
//     document.getElementById('selectedLang').value = currentLang;
    
//     // Loop through all question containers
//     questions.forEach(question => {
//         const enContent = question.querySelector('.en-content');
//         const arContent = question.querySelector('.ar-content');
        
//         // Toggle visibility of language-specific content for each question
//         if (enContent && arContent) {
//             enContent.style.display = currentLang === 'en' ? 'block' : 'none';
//             arContent.style.display = currentLang === 'en' ? 'none' : 'block';
//         }
//     });
    
//     // Update the toggle button text
//     document.querySelector('.lang-toggle').innerText = currentLang === 'en' ? 'العربية' : 'English';
// }


function toggleLanguage() {
    currentLang = currentLang === 'en' ? 'ar' : 'en';
    
    // Update the hidden language input field
    document.getElementById('selectedLang').value = currentLang;
    
    // Loop through all question containers
    questions.forEach(question => {
        const enContent = question.querySelector('.en-content');
        const arContent = question.querySelector('.ar-content');
        
        // Toggle visibility of language-specific content for each question
        if (enContent && arContent) {
            enContent.style.display = currentLang === 'en' ? 'block' : 'none';
            arContent.style.display = currentLang === 'en' ? 'none' : 'block';
        }
    });

    // Loop through headings and paragraphs
    document.querySelectorAll('[data-en]').forEach(el => {
        el.innerText = el.getAttribute(`data-${currentLang}`);
    });
    
    // Update the toggle button text
    document.querySelector('.lang-toggle').innerText = currentLang === 'en' ? 'العربية' : 'English';
}


// // Initialize to ensure English is shown by default
// document.addEventListener('DOMContentLoaded', function() {
//     // Set the initial language to English
//     currentLang = 'en';
    
//     // Ensure the correct language content is displayed on load
//     questions.forEach(question => {
//         const enContent = question.querySelector('.en-content');
//         const arContent = question.querySelector('.ar-content');
        
//         if (enContent && arContent) {
//             enContent.style.display = 'block';  // Show English content
//             arContent.style.display = 'none';   // Hide Arabic content
//         }
//     });

//     // Set the language toggle button text
//     document.querySelector('.lang-toggle').innerText = 'العربية';

//     // Initially show the first question and add event listeners
//     showQuestion(0);
//     addRadioEventListeners();
// });
document.addEventListener('DOMContentLoaded', function() {
    // Initialize currentLang from the hidden input value
    currentLang = document.getElementById('selectedLang').value || 'en';
    
    // Ensure the correct language content is displayed on load
    questions.forEach(question => {
        const enContent = question.querySelector('.en-content');
        const arContent = question.querySelector('.ar-content');
        
        if (enContent && arContent) {
            enContent.style.display = currentLang === 'en' ? 'block' : 'none';
            arContent.style.display = currentLang === 'en' ? 'none' : 'block';
        }
    });

    // Set the language toggle button text
    document.querySelector('.lang-toggle').innerText = currentLang === 'en' ? 'العربية' : 'English';

    // Initially show the first question and add event listeners
    showQuestion(0);
    addRadioEventListeners();
});

</script>
</body>
</html>

