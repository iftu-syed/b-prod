<!-- edit-admin.ejs -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Admin</title>
    <link rel="stylesheet" href="/styles/styles.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>
    <div class="sidebar">
        <div class="top">
             <div class="logo">
            <img src="/assets/logo.png" alt="WeHealthify">
             </div>
             <i class="bx bx-menu" id="btn"></i>
        </div>
    
        
        <div class="user">
            <div>
                <p class="bold">Super Admin</p>
                <p>WeHealthify</p>
            </div>
        </div>
        <ul>
          <li>
              <a href="#page1">
                  <i class='bx bx-add-to-queue'></i>
                  <span class="nav-item">Add Hospital Admin</span>
              </a>
              <span class="tooltip">Add </span>
          </li>      
            <li>
                <a href="#page2">
                  <i class='bx bx-list-ul' ></i>
                    <span class="nav-item">List of Hospitals</span>
                </a>
                <span class="tooltip">List </span>
            </li>
        
            
            <li>
                <a href="/">
                    <i class="bx bx-log-out"></i>
                    <span class="nav-item">Logout</span>
                </a>
                <span class="tooltip">Logout</span>
            </li>
        </ul>
    </div>
    
    <div class="main-content">
        <div class="topbar">
            <h1>Welcome, Super Admin</h1>
            <form action="/search" method="GET" class="searchtopbar">
              <input type="text" name="mrNo" placeholder="Search Hospital">
              <button type="submit" class="btn-search"><i class='bx bx-search-alt'></i></button>
          </form>
        </div>
    
        <hr>
    <div class="page1">
        <br><h2>Edit Admin</h2><br>
        <form action="/editAdmin/<%= admin._id %>" method="POST" class="addAdmin">
            <input type="text" id="username" name="username" value="<%= admin.username %>" placeholder="Username" required><br>
            <input type="password" id="password" name="password" value="<%= admin.password %>" placeholder="Password" required><br>
            <input type="text" id="hospital" name="hospital" value="<%= admin.hospital %>" placeholder="Hospital" required><br>
            <select id="subscription" name="subscription"><br>
                <option value="Active" <%= admin.subscription === 'Active' ? 'selected' : '' %>>Subscription Active</option>
                <option value="Inactive" <%= admin.subscription === 'Inactive' ? 'selected' : '' %>>Subscription Inactive</option>
            </select><br>
            <button type="submit"><i class='bx bx-save'></i> Save</button>
        </form>
        <a href="/">Back to Dashboard</a>
    </div>

    <script>
        // JavaScript code goes here
    </script>
    <script src="/scripts/main.js"></script>
    <script src="/scripts/main.js" type="text/javascript"></script>
    <script>
        let btn = document.querySelector('#btn');
        let sidebar = document.querySelector('.sidebar');
        
        btn.onclick = function() {
            sidebar.classList.toggle('active');
        };

        
        </script>
        
        <!-- /* current page on sidebar */ -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const sidebarLinks = document.querySelectorAll('.sidebar ul li a');
            
                function removeActiveClasses() {
                    sidebarLinks.forEach(link => {
                        link.classList.remove('active');
                    });
                }
            
                function setActiveLink(hash) {
                    removeActiveClasses();
                    const activeLink = document.querySelector(`.sidebar ul li a[href="${hash}"]`);
                    if (activeLink) {
                        activeLink.classList.add('active');
                    }
                }
            
                // Check the URL fragment and set the active link on page load
                const currentHash = window.location.hash;
                if (currentHash) {
                    setActiveLink(currentHash);
                }
            
                sidebarLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        setActiveLink(link.getAttribute('href'));
                    });
                });
            
                // Use IntersectionObserver to update the active link as you scroll
                const sections = document.querySelectorAll('.main-content > div[id]');
                const observerOptions = {
                    root: null,
                    rootMargin: '0px',
                    threshold: 0.6 // Adjust this threshold as needed
                };
            
                function observerCallback(entries) {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            setActiveLink(`#${entry.target.id}`);
                        }
                    });
                }
            
                const observer = new IntersectionObserver(observerCallback, observerOptions);
                sections.forEach(section => {
                    observer.observe(section);
                });
            });
            </script>
</body>

</html>
